const char ajax_js[] PROGMEM = R"=====(var ajax={loaddirect:function(t,e){var s=new XMLHttpRequest;s.op={_url:t,_cb:e},s.onreadystatechange=ajax.RCDirect,s.open("GET",s.op._url,!0),s.send(null)},RCDirect:function(){4==this.readyState&&this.op._cb&&this.op._cb(this.responseText)},load:function(t,e,s){var a=new XMLHttpRequest;a.op={_url:"load?name="+t,_data:"",_cb:s,_s:0,_a:e},a.onreadystatechange=ajax.RC,a.open("GET",a.op._url,!0),a.send(null)},RC:function(){if(4==this.readyState)if(this.op._data+=this.responseText,4e3==this.responseText.length){var t=new XMLHttpRequest;t.op=this.op,t.op._s+=this.responseText.length,t.onreadystatechange=ajax.RC,console.log("need another request "+this.op._s),t.open("GET",this.op._url+"&start="+this.op._s,!0),t.send(null)}else{if(console.log("completed request "+this.op._url+" with "+this.responseText.length+" chars - total "+this.op._data.length),this.op._a)switch(this.op._a.Type){case"replace":console.log("replace "+this.op._a.Id+" with "+this.op._data);var e=document.getElementById(this.op._a.Id);null!=e&&(e[this.op._a.Tag]=this.op._data);break;case"insert":if(this.op._url.endsWith(".js")){var s=document.createElement("script");s.text=this.op._data,document.body.appendChild(s)}else if(this.op._url.endsWith(".css")){var a=document.createElement("link");a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("href","data:text/css,"+escape(this.op._data));var o=document.getElementsByTagName("head")[0];o.appendChild(a)}break;default:throw"unknown action "+this.op._a.Type}this.op._cb&&this.op._cb(this.op._data)}}};)=====";